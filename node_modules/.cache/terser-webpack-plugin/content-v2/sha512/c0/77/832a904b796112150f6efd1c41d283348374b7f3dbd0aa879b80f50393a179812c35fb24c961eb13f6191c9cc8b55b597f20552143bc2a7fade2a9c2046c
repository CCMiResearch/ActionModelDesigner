{"code":"!function(e){var t={};function n(i){if(t[i])return t[i].exports;var l=t[i]={i:i,l:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t,n){\"use strict\";n.r(t),Blockly.Blocks.bool1={init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([[\"variable1\",\"variable1\"],[\"variable2\",\"variable2\"],[\"variable3\",\"variable3\"]]),\"variables\").appendField(new Blockly.FieldDropdown([[\"==\",\"OPTIONNAME\"],[\"<=\",\"OPTIONNAME\"],[\">=\",\"OPTIONNAME\"],[\"<\",\"OPTIONNAME\"],[\">\",\"OPTIONNAME\"]]),\"comparator\").appendField(new Blockly.FieldTextInput(\"data value\"),\"data_value\"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260)}},Blockly.Blocks.bool2={init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([[\"variable1\",\"variable1\"],[\"variable2\",\"variable2\"],[\"variable3\",\"variable3\"]]),\"variables\").appendField(new Blockly.FieldDropdown([[\"==\",\"OPTIONNAME\"],[\"<=\",\"OPTIONNAME\"],[\">=\",\"OPTIONNAME\"],[\"<\",\"OPTIONNAME\"],[\">\",\"OPTIONNAME\"]]),\"comparator\").appendField(new Blockly.FieldDropdown([[\"variable1\",\"variable1\"],[\"variable2\",\"variable2\"],[\"variable3\",\"variable3\"]]),\"variables\"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(260)}},Blockly.Blocks.parentheses={init:function(){this.appendDummyInput().appendField(\"(\"),this.appendStatementInput(\"bool statement\").setCheck(null),this.appendDummyInput().appendField(\"  )\"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20)}},Blockly.Blocks.not={init:function(){this.appendDummyInput().appendField(\"NOT\"),this.appendStatementInput(\"bool statement\").setCheck(null),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20)}},Blockly.Blocks.and={init:function(){this.appendDummyInput().appendField(\"AND\"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20)}},Blockly.Blocks.or={init:function(){this.appendDummyInput().appendField(\"OR\"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(20)}},Blockly.Blocks.action_assign={init:function(){this.setColour(210),this.appendDummyInput().appendField(\"Assign:\").appendField(new Blockly.FieldTextInput(\"\"),\"data1\").appendField(\"=\").appendField(new Blockly.FieldTextInput(\"\"),\"data2\"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},Blockly.Blocks.action_trans={init:function(){var e=new Blockly.FieldDropdown([[\"T1\",\"T1\"],[\"T2\",\"T2\"],[\"T3\",\"T3\"]]),t=new Blockly.FieldDropdown([[\"T1\",\"T1\"],[\"T2\",\"T2\"],[\"T3\",\"T3\"]]);this.setColour(300),this.appendDummyInput().appendField(t,\"Trans\").appendField(e,\"State\"),this.appendStatementInput(\"Parameters\"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},Blockly.Blocks.param_helper={init:function(){var e=new Blockly.FieldDropdown([[\"T1\",\"T1\"],[\"T2\",\"T2\"],[\"T3\",\"T3\"]]);this.setColour(60),this.appendDummyInput().appendField(new Blockly.FieldTextInput(\"\"),\"param\").appendField(\":\").appendField(e,\"Value\"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},Blockly.Blocks.dataField={init:function(){var e=new Blockly.FieldDropdown([[\"T1\",\"T1\"],[\"T2\",\"T2\"],[\"T3\",\"T3\"]]);this.setColour(75),this.appendDummyInput().appendField(e,\"Value\"),this.setPreviousStatement(!0),this.setNextStatement(!0)}},Blockly.Blocks.dascontract_rule={init:function(){this.appendDummyInput().appendField(\"Rule:\").appendField(new Blockly.FieldTextInput(\"...Name...\"),\"RULE_NAME\"),this.appendDummyInput().appendField(\"When\").appendField(new Blockly.FieldDropdown([[\"T-1\",\"T_1\"],[\"T-2\",\"T_2\"],[\"T-3\",\"T_3\"]]),\"TRANSACTION_KIND\").appendField(new Blockly.FieldDropdown([[\"Requested\",\"REQUESTED\"],[\"Promised\",\"PROMISED\"],[\"Declined\",\"DECLINED\"]]),\"STATE\"),this.appendStatementInput(\"IF\").setCheck(null).appendField(\"If\"),this.appendStatementInput(\"THEN\").setCheck(null).appendField(\"Then\"),this.setColour(265),this.setTooltip(\"\")}},Blockly.Blocks.rule={init:function(){toto=this,this.setColour(120),this.appendDummyInput().appendField(\"Rule: \").appendField(new Blockly.FieldTextInput(\"default text\"),\"RuleName\"),this.setMutator(new Blockly.Mutator([\"while\",\"with_helper\",\"else\"])),this.resetVariables(),this.updateShape_()},resetVariables:function(){this.join_=0,this.when=!0,this.while=!1,this.with=!1,this.if=!0,this.then=!0,this.else=!1},mutationToDom:function(){var e=document.createElement(\"mutation\");return e.setAttribute(\"join\",this.join_),e.setAttribute(\"when\",this.when),e.setAttribute(\"while\",this.while),e.setAttribute(\"with\",this.with),e.setAttribute(\"if\",this.if),e.setAttribute(\"then\",this.then),e.setAttribute(\"else\",this.else),e},domToMutation:function(e){},decompose:function(e){var t=e.newBlock(\"rule_helper\");t.initSvg();var n=t.nextConnection;if(1==this.while){var i=e.newBlock(\"while\");i.initSvg(),n.connect(i.previousConnection),n=i.nextConnection}if(1==this.with){var l=e.newBlock(\"with_helper\");l.initSvg(),n.connect(l.previousConnection),n=l.nextConnection}if(1==this.else){var o=e.newBlock(\"else\");o.initSvg(),n.connect(o.previousConnection),n=o.nextConnection}return t},compose:function(e){this.resetVariables();var t=[null],n=[null],i=[null],l=[null];n.push(this.getInput(\"IF\").connection.targetConnection),i.push(this.getInput(\"THEN\").connection.targetConnection);for(var o=e.nextConnection.targetBlock();o;){switch(o.type){case\"while\":this.while=!0;break;case\"with_helper\":this.with=!0,t.push(o.statementConnection_);break;case\"else\":this.else=!0,l.push(o.statementConnection_)}o=o.nextConnection&&o.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,i,l)},updateShape_:function(){if(this.getInput(\"WHEN\")&&this.removeInput(\"WHEN\"),this.getInput(\"WHILE\")&&this.removeInput(\"WHILE\"),this.getInput(\"WITH\")&&this.removeInput(\"WITH\"),this.getInput(\"IF\")&&this.removeInput(\"IF\"),this.getInput(\"THEN\")&&this.removeInput(\"THEN\"),this.getInput(\"ELSE\")&&this.removeInput(\"ELSE\"),1==this.when){var e=new Blockly.FieldDropdown(amdModeler.whenStateOptions(amdModeler)),t=new Blockly.FieldDropdown(amdModeler.whenTransOptions(amdModeler));this.appendDummyInput(\"WHEN\").appendField(\"When\").appendField(t,\"whenTrans\").appendField(e,\"whenState\")}if(1==this.while){var n=new Blockly.FieldDropdown(amdModeler.whileStateOptions(amdModeler)),i=new Blockly.FieldDropdown(amdModeler.whileTransOptions(amdModeler));this.appendDummyInput(\"WHILE\").appendField(\"While\").appendField(i,\"whileTrans\").appendField(n,\"whileState\")}1==this.with&&this.appendStatementInput(\"WITH\").setCheck([\"with\"]).appendField(\"With\"),1==this.if&&this.appendStatementInput(\"IF\").setCheck(\"if\").appendField(\"If\"),1==this.then&&this.appendStatementInput(\"THEN\").setCheck([\"action_assign\",\"action_trans\"]).appendField(\"Then\"),1==this.else&&this.appendStatementInput(\"ELSE\").setCheck([\"action_assign\",\"action_trans\"]).appendField(\"Else\")},reconnectChildBlocks_:function(e,t,n,i){1==this.with&&Blockly.Mutator.reconnect(e[1],this,\"WITH\"),1==this.if&&Blockly.Mutator.reconnect(t[1],this,\"IF\"),1==this.then&&Blockly.Mutator.reconnect(n[1],this,\"THEN\"),1==this.else&&Blockly.Mutator.reconnect(i[1],this,\"ELSE\")},rebuildShape_:function(){var e=[null],t=[null],n=[null],i=[null];if(this.getInput(\"WITH\")){var l=this.getInput(\"WITH\");e.push(l.connection.targetConnection)}if(this.getInput(\"IF\")){var o=this.getInput(\"IF\");t.push(o.connection.targetConnection)}if(this.getInput(\"THEN\")){var s=this.getInput(\"THEN\");n.push(s.connection.targetConnection)}if(this.getInput(\"ELSE\")){var a=this.getInput(\"Else\");i.push(a.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,n,i)},saveConnections:function(e){for(var t=e.nextConnection.targetBlock();t;){var n;switch(t.type){case\"with_helper\":n=this.getInput(\"WITH\");break;case\"else\":n=this.getInput(\"ELSE\")}t.statementConnection_=n&&n.connection.targetConnection,t=t.nextConnection&&t.nextConnection.targetBlock()}}};Blockly.inject(\"blocklyDiv\",{media:\"node_modules/blockly/media/\",toolbox:document.getElementById(\"toolbox\")})}]);","extractedComments":[]}